# This file is part of transitfeeds-api.
# https://github.com/fitnr/transitfeeds-api

# Licensed under the GPLv3 license
# Copyright (c) 2017, Neil Freeman <contact@fakeisthenewreal.org>

language: python

python:
    - 2.7
    - 3.4
    - 3.5
    - 3.6
    - pypy

global:
  env:
    - secure: aH51YNeXXGbahkfixzsMuUC0imnW29v1/REs0Pr4xfVl37Y/gOTRKy+DOuR3KDWfWEC83XXa8N1UQS2dSjSbe877sWim8Uh9EYsdhcGpco+3R8CVw5/u3/id7zWKNIP54o+7IUFRcUumEw8ONZvhGh45zwLWEDm1XYC2xVMl3BkbUJgy1QHanH9H63hl9Va2Sme3wybMnxjS9z/unSIZpr3INNc8RQmLyzjX3ErvFp2eXO0y3AWi5ex8QgX8IBHBECn3zddQDlDWYKOEoy6d48TVjxxfE5Z+QJdLvxhY61WnRL4gD/ox3+T2juMapC90hYIiX7XHjPXHmkI6/LARhcxlH+uzVjBPijpdQqtLX03QRmwMaq29a0iw0b8Q0FTAA8ejOg+0wO9JFbRUPiexDpfeFWp7SAz1huZ2gUYFjiXFlfeYjzc6rQMFlkgQ2tz/SESvuRueRAcdq3a27Lt1M8kslODIWOSxnKFKie2kYd8TrcRL4O9De6mEzlzdHZiw+uRbZzZSktEJlRCjrzXvMLYvD9tpY93ZfD6XwmVkWAW0NtoRuWrJY/Ht3NMqFa9ASE3Uh5AXxJX6jV4xtwnJzz5cicTwZX0UUrvocp6sXvwYKhGeKuuXQUBxBqXcZkLvQM/4QBd7CsJ/0KII3zOj8FtaksN6v8FS7dH5iOGb2lE=

install:
    - pip install coverage
    - python setup.py install

script:
    - coverage run setup.py test
    - transitfeeds location --list
    - transitfeeds location -H 119
    - transitfeeds feed mta/81
    - transitfeeds feed -H mta/80

after_script:
    - coverage report --show-missing --include=transitfeeds/*
